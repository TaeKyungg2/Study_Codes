# 🧠 메모리 관련 Q&A 요약

## ✅ C++에서 `new`는 전역변수인가?
- 아니요. `new`는 **힙(heap)** 에 메모리를 할당하는 키워드.
- 전역변수와는 무관하며, 힙에 할당된 데이터는 **명시적으로 지워야 함 (`delete`)**.

---

## ✅ 지역변수에 주소(&)만 저장하면 되지 않나?
- 지역변수는 **함수 끝나면 스택에서 사라짐**.
- 해당 주소를 외부에 넘기면 **dangling pointer** 문제가 발생할 수 있음.
- `new`로 만든 객체는 함수 밖에서도 유효하므로 필요할 때 사용.

---

## ✅ `new`로 만든 포인터 변수도 지역에서 만들면 못 쓰지 않나?
- 포인터 변수는 지역에 있어도, 그 포인터가 가리키는 값은 **힙에 저장되기 때문에 유효**.
- 포인터 자체는 사라져도, 그 값은 메모리에 남아 있음 (→ **누수 위험**).

---

## ✅ `std::vector`는 자동으로 메모리 관리하나?
- 네. 내부적으로 힙을 사용하지만, **소멸자에서 자동으로 정리됨**.
- `new` 없이도 동적 배열처럼 쓰고, 메모리 관리도 자동이라 안전.

---

## ✅ 파이썬 리스트도 힙에 저장되나?
- 리스트 자체는 **스택에 저장된 참조 변수**.
- 리스트의 내부 요소(객체들)는 전부 **힙에 저장됨**.
- 리스트가 삭제되면, Python의 **GC(Garbage Collector)** 가 알아서 정리함.

---

## ✅ C의 배열은 어디에 저장되나?
- 정적 배열(`int arr[10]`) → 스택에 저장.
- 동적 배열(`malloc`, `new`) → 힙에 저장.
- 스택에 저장된 건 함수 끝나면 자동 해제, 힙은 수동 해제 필요.

---

## ✅ 함수에서 지역변수는 스택에 어떻게 저장되나?
- 스택 프레임에서 기준 주소(`rbp`)를 기준으로 **오프셋(offset)** 으로 접근함.
- 예: `rbp-4`, `rbp-8` 이런 식으로 변수에 접근.

---

## ✅ 오프셋(offset)의 의미와 어원?
- 의미: **기준 주소에서 떨어진 거리 (바이트 단위)**.
- 어원: `off`(떨어져) + `set`(놓다) → 떨어져 놓인 값.

---

## ✅ 스택 메모리는 진짜 스택 자료구조인가?
- 아니요. **물리적인 자료구조는 아님**.
- 단지, 메모리를 **후입선출(LIFO)** 방식으로 쓰기 때문에 "스택"이라고 부름.
- 운영체제가 스택 포인터(`rsp`)로 관리하며, **일정 범위를 스택으로 예약**해 둠.

---

## 📌 핵심 개념 요약 테이블

| 개념             | 설명                                                                 |
|------------------|----------------------------------------------------------------------|
| **스택**         | 지역 변수 저장. 함수 끝나면 자동 해제. 빠르고 간단한 구조.           |
| **힙**           | 직접 `new`, `malloc` 등으로 할당. 수명 길고 수동 해제 필요.           |
| **오프셋(offset)** | 기준 주소로부터의 거리. 컴파일러가 자동 계산해서 접근.               |
| **vector**       | 내부 배열을 힙에 저장하고 자동으로 메모리 관리해주는 C++ 컨테이너.   |
| **파이썬 리스트** | 주소 배열이 스택, 실제 값은 힙. 참조 기반. GC가 메모리 관리.         |